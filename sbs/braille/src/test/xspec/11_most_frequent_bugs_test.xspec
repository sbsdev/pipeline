<?xml version="1.0" encoding="utf-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
	       xmlns:dtb="http://www.daisy.org/z3986/2005/dtbook/"
	       xmlns:brl="http://www.daisy.org/z3986/2009/braille/"
               stylesheet="../resources/block-translate.xsl"
	       preserve-space="dtb:p dtb:byline dtb:author dtb:li dtb:lic dtb:doctitle dtb:docauthor dtb:span dtb:em dtb:strong brl:emph dtb:line dtb:h1 dtb:h2 dtb:h3 dtb:h4 dtb:h5 dtb:h6">

  <x:param name="contraction-grade">2</x:param>
  <x:param name="ascii-braille">yes</x:param>

    <x:scenario label="Falsche Kursiv-Ankündigung beim Gebrauch von nbsp statt gewöhnlichem Leerzeichen">
      <!-- http://redmine.sbszh.ch/issues/2625 -->
      <x:context>
        <dtb:p xml:lang="de"><dtb:em>bla blo</dtb:em></dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de"><dtb:em>__BLA BLO'.</dtb:em></dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Falsche Übersetzungen bei mixed emphasis">
      <!-- http://redmine.sbszh.ch/issues/2464 -->
      <x:context>
	  <dtb:p xml:lang="de"><dtb:em>experimental</dtb:em>protektorverhalten</dtb:p>
	  <dtb:p xml:lang="de">experimental<dtb:em>protektor</dtb:em>verhalten</dtb:p>
	  <dtb:p xml:lang="de">experimentalprotektor<dtb:em>verhalten</dtb:em></dtb:p>
      </x:context>
      <x:expect label="braille">
	  <dtb:p xml:lang="de"><dtb:em>_XP7IMCT:'.</dtb:em>PRO(KT?V7H:TC</dtb:p>
	  <dtb:p xml:lang="de">XP7IMCT:<dtb:em>'_PRO(KT?'.</dtb:em>V7H:TC</dtb:p>
	  <dtb:p xml:lang="de">XP7IMCT:PRO(KT?<dtb:em>'_V7H:TC</dtb:em></dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Pfeilsymbole erscheinen fälschlicherweise IMMER mit Leerzeichen davor und dahinter">
      <!-- http://redmine.sbszh.ch/issues/2456 -->
      <x:context>
	  <dtb:p xml:lang="de">Abgase → Umweltverschmutzung</dtb:p>
	  <dtb:p xml:lang="de">Siehe Kapitel 3 (→ Kaufvertrag)</dtb:p>
      </x:context>
      <x:expect label="braille">
	  <dtb:p xml:lang="de">ABGASE ::O UMWYTV75MUTZU</dtb:p>
	  <dtb:p xml:lang="de">S0HE KAPITY #C =::O K1FV7TG=</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Automatische Korrektur des Abstands zwischen Operator und Zahl">
      <!-- http://redmine.sbszh.ch/issues/2326 -->
      <x:context>
	<dtb:p xml:lang="de">Kaufpreis × 4</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">K1FPR3S "(#D</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Plus">
      <x:context>
	<dtb:p xml:lang="de">222 + 222 222+222 222 +222 wort + wort wort + 222</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">#BBB "+#BBB #BBB "+#BBB #BBB "+#BBB W?T "+ W?T W?T "+#BBB</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Minus">
      <x:context>
	<dtb:p xml:lang="de">222 &#x2212; 222 222&#x2212;222 222 &#x2212;222 wort &#x2212; wort wort &#x2212; 222</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">#BBB "-#BBB #BBB "-#BBB #BBB "-#BBB W?T "- W?T W?T "-#BBB</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Malkreuz">
      <x:context>
	<dtb:p xml:lang="de">222 × 222 222×222 222 ×222 wort × wort wort × 222</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">#BBB "(#BBB #BBB "(#BBB #BBB "(#BBB W?T "( W?T W?T "(#BBB</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Geteilt durch">
      <x:context>
	<dtb:p xml:lang="de">222 ÷ 222 222÷222 222 ÷222 wort ÷ wort wort ÷ 222</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">#BBB ":#BBB #BBB ":#BBB #BBB ":#BBB W?T ": W?T W?T ":#BBB</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Gleich">
      <x:context>
	<dtb:p xml:lang="de">222 = 222 222=222 222 =222 wort = wort wort = 222</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">#BBB "=#BBB #BBB "=#BBB #BBB "=#BBB W?T "= W?T W?T "=#BBB</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Fehlender Punkt 6 Apo bei Frage-/Ausrufezeichen in Klammern">
      <!-- http://redmine.sbszh.ch/issues/2324 -->
      <x:context>
	<dtb:p xml:lang="de">(?) (!)</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">='?= ='+=</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Korrektur des Trademark-Symbols">
      <!-- http://redmine.sbszh.ch/issues/2270 -->
      <x:context>
	<dtb:p xml:lang="de">foo™</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">FOO'=>TM=</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Falsche Übersetzung bei Wörtern mit Stern `*`">
      <!-- http://redmine.sbszh.ch/issues/2187 -->
      <x:context>
	  <dtb:p xml:lang="de">Martell</dtb:p>
	  <dtb:p xml:lang="de">Martell*</dtb:p>
      </x:context>
      <x:expect label="braille">
	  <dtb:p xml:lang="de">M)(Q</dtb:p>
	  <dtb:p xml:lang="de">M)(Q'*</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="Fragezeichen nach Klammer fälschlicherweise ohne Pt. 6 Apo">
      <!-- http://redmine.sbszh.ch/issues/2186 -->
      <x:context>
	  <dtb:p xml:lang="de">bla (45-55) blo</dtb:p>
	  <dtb:p xml:lang="de">bla ?-55 blo</dtb:p>
	  <dtb:p xml:lang="de">bla (?-55) blo</dtb:p>
      </x:context>
      <x:expect label="braille">
	  <dtb:p xml:lang="de">BLA =#DE-#EE'= BLO</dtb:p>
	  <dtb:p xml:lang="de">BLA '?-#EE BLO</dtb:p>
	  <dtb:p xml:lang="de">BLA ='?-#EE'= BLO</dtb:p>
      </x:expect>
    </x:scenario>

    <x:scenario label="falsches Resultat bei Wortersatzstrich -xxx, wenn direkt nach Tag">
      <!-- http://redmine.sbszh.ch/issues/1505 -->
      <x:context>
	<dtb:p xml:lang="de">-losenheim</dtb:p>
      </x:context>
      <x:expect label="braille">
	<dtb:p xml:lang="de">'-LOSCH3M</dtb:p>
      </x:expect>
    </x:scenario>

</x:description>
